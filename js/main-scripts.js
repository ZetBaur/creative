$(document).ready((function(){$(".grid").isotope({itemSelector:".grid-item",layoutMode:"fitRows"}),$(".grid-wrapper__button").on("click",(function(){$(".grid-wrapper__button").removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-filter");return $(".grid").isotope({filter:e}),!1})),$(".testimonials__slider-2").slick({speed:500,asNavFor:".testimonials__slider-1",prevArrow:'<button type="button" class="slick-arrow slick-prev">Previous</button>',nextArrow:'<button type="button" class="slick-arrow slick-next">Next</button>'}),$(".testimonials__slider-1").slick({speed:500,fade:!0,arrows:!1,asNavFor:".testimonials__slider-2"}),$(window).scroll((function(){$(this).scrollTop()>600?$(".pageup").fadeIn():$(".pageup").fadeOut()})),$(".burger, .burger svg path").on("click",(function(){$(".menu-list").addClass("open")})),$(".menu__close").on("click",(function(){$(".menu-list").removeClass("open")})),$(".menu-item, .menu-link").on("click",(function(){$(".menu-list").hasClass("open")&&$(".menu-list").removeClass("open")}));let e=document.querySelectorAll("form");if(e.length>0)for(let l=0;l<e.length;l++){e[l].addEventListener("submit",t)}async function t(e){let t=e.target.closest("form");if(0==function(e){let t=0,n=e.querySelectorAll("._req");if(n.length>0)for(let e=0;e<n.length;e++){const s=n[e];_is_hidden(s)||(t+=l(s))}return t}(t)){let l=t.getAttribute("action")?t.getAttribute("action").trim():"#",n=t.getAttribute("method")?t.getAttribute("method").trim():"GET";const s=t.getAttribute("data-message");if(t.getAttribute("data-ajax")){e.preventDefault();let a=new FormData(t);t.classList.add("_sending");let o=await fetch(l,{method:n,body:a});if(o.ok){await o.json();t.classList.remove("_sending"),s&&popup_open("_"+s+"-message"),function(e){let t=e.querySelectorAll("input,textarea");for(let e=0;e<t.length;e++){const l=t[e];l.parentElement.classList.remove("_focus"),l.classList.remove("_focus"),l.value=l.getAttribute("data-value")}let l=e.querySelectorAll(".checkbox__input");if(l.length>0)for(let e=0;e<l.length;e++){l[e].checked=!1}let n=e.querySelectorAll("select");if(n.length>0)for(let e=0;e<n.length;e++){const t=n[e],l=t.getAttribute("data-default");t.value=l,c(t)}}(t)}else alert("Ошибка"),t.classList.remove("_sending")}}else{let l=t.querySelectorAll("._error");l&&t.classList.contains("_goto-error")&&_goto(l[0],1e3,50),e.preventDefault()}}function l(e){let t=0,l=e.getAttribute("data-value");if("email"==e.getAttribute("name")||e.classList.contains("_email")){if(e.value!=l){let t=e.value.replace(" ","");e.value=t}email_test(e)||e.value==l?(n(e),t++):s(e)}else"checkbox"==e.getAttribute("type")&&0==e.checked||""==e.value||e.value==l?(n(e),t++):s(e);return t}function n(e){e.classList.add("_error"),e.parentElement.classList.add("_error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t);let l=e.getAttribute("data-error");l&&""!=l&&e.parentElement.insertAdjacentHTML("beforeend",'<div class="form__error">'+l+"</div>")}function s(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t)}let a=document.querySelectorAll(".form__viewpass");for(let e=0;e<a.length;e++){const t=a[e];t.addEventListener("click",(function(e){t.classList.contains("_active")?t.parentElement.querySelector("input").setAttribute("type","password"):t.parentElement.querySelector("input").setAttribute("type","text"),t.classList.toggle("_active")}))}let o=document.getElementsByTagName("select");function i(e){const t=document.querySelectorAll(".select");if(!e.target.closest(".select"))for(let e=0;e<t.length;e++){const l=t[e],n=l.querySelector(".select__options");l.classList.remove("_active"),_slideUp(n,100)}}function r(e){const t=e.parentElement,l=e.getAttribute("class"),n=e.querySelector("option:checked");e.setAttribute("data-default",n.value),e.style.display="none",t.insertAdjacentHTML("beforeend",'<div class="select select_'+l+'"></div>'),e.parentElement.querySelector(".select").appendChild(e),c(e)}function c(e){const t=e.parentElement,l=t.querySelector(".select__item"),n=e.querySelectorAll("option"),s=e.querySelector("option:checked").text,a=e.getAttribute("data-type");l&&l.remove();let o="";o="input"==a?'<div class="select__value icon-select-arrow"><input autocomplete="off" type="text" name="form[]" value="'+s+'" data-error="Ошибка" data-value="'+s+'" class="select__input"></div>':'<div class="select__value icon-select-arrow"><span>'+s+"</span></div>",t.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+o+'</div><div class="select__options">'+function(e){if(e){let t="";for(let l=0;l<e.length;l++){const n=e[l],s=n.value;if(""!=s){t=t+'<div data-value="'+s+'" class="select__option">'+n.text+"</div>"}}return t}}(n)+"</div></div></div>"),function(e,t){const l=t.querySelector(".select__item"),n=t.querySelector(".select__options"),s=t.querySelectorAll(".select__option"),a=e.getAttribute("data-type"),o=t.querySelector(".select__input");l.addEventListener("click",(function(){let e=document.querySelectorAll(".select");for(let t=0;t<e.length;t++){const n=e[t],s=n.querySelector(".select__options");n!=l.closest(".select")&&(n.classList.remove("_active"),_slideUp(s,100))}_slideToggle(n,100),t.classList.toggle("_active")}));for(let l=0;l<s.length;l++){const n=s[l],i=n.getAttribute("data-value"),r=n.innerHTML;"input"==a?o.addEventListener("keyup",u):n.getAttribute("data-value")==e.value&&(n.style.display="none"),n.addEventListener("click",(function(){for(let e=0;e<s.length;e++){s[e].style.display="block"}"input"==a?(o.value=r,e.value=i):(t.querySelector(".select__value").innerHTML="<span>"+r+"</span>",e.value=i,n.style.display="none")}))}}(e,t)}function u(e){e.target.closest(".select ").querySelector(".select__options");let t=e.target.closest(".select ").querySelectorAll(".select__option"),l=e.target.value.toUpperCase();for(let e=0;e<t.length;e++){let n=t[e];(n.textContent||n.innerText).toUpperCase().indexOf(l)>-1?n.style.display="":n.style.display="none"}}function d(e){const t=e.getAttribute("data-value");""==e.value&&""!=t&&(e.value=t)}function p(e){e.classList.add("_focus"),e.parentElement.classList.add("_focus")}function m(e){e.classList.remove("_focus"),e.parentElement.classList.remove("_focus")}function v(e,t){e.inputmask.remove(),e.value=t,m(e)}o.length>0&&function(){for(let e=0;e<o.length;e++){r(o[e])}document.addEventListener("click",(function(e){i(e)})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&i(e)}))}(),function(e){if(e.length>0)for(let t=0;t<e.length;t++){const l=e[t],n=l.getAttribute("data-value");d(l),""!=l.value&&l.value!=n&&p(l),l.addEventListener("focus",(function(e){l.value==n&&(p(l),l.value=""),"pass"===l.getAttribute("data-type")&&l.setAttribute("type","password"),l.classList.contains("_date"),l.classList.contains("_phone")&&(l.classList.add("_mask"),Inputmask("+375 (99) 9999999",{clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){v(l,n)}}).mask(l)),l.classList.contains("_digital")&&(l.classList.add("_mask"),Inputmask("9{1,}",{placeholder:"",clearIncomplete:!0,clearMaskOnLostFocus:!0,onincomplete:function(){v(l,n)}}).mask(l)),s(l)})),l.addEventListener("blur",(function(e){""==l.value&&(l.value=n,m(l),l.classList.contains("_mask")&&v(l,n),"pass"===l.getAttribute("data-type")&&l.setAttribute("type","text"))})),l.classList.contains("_date")&&datepicker(l,{customDays:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],customMonths:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],formatter:(e,t,l)=>{const n=t.toLocaleDateString();e.value=n},onSelect:function(e,t,l){p(e.el)}})}}(document.querySelectorAll("input[data-value],textarea[data-value]"));let _=document.querySelectorAll(".quantity__button");if(_.length>0)for(let e=0;e<_.length;e++){const t=_[e];t.addEventListener("click",(function(e){let l=parseInt(t.closest(".quantity").querySelector("input").value);t.classList.contains("quantity__button_plus")?l++:(l-=1,l<1&&(l=1)),t.closest(".quantity").querySelector("input").value=l}))}const f=document.querySelector(".price__range");if(f){noUiSlider.create(f,{start:[0,2e5],connect:!0,tooltips:[wNumb({decimals:0}),wNumb({decimals:0})],range:{min:[0],max:[2e5]}});const e=document.getElementById("price-start"),t=document.getElementById("price-end");function g(){let l,n;""!=e.value&&(l=e.value),""!=t.value&&(n=t.value),f.noUiSlider.set([l,n])}e.addEventListener("change",g),t.addEventListener("change",g)}$.each($(".ibg"),(function(e,t){$(this).find("img").length>0&&$(this).css("background-image",'url("'+$(this).find("img").attr("src")+'")')}))}));